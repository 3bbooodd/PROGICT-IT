<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    
  
  
    <link rel="stylesheet" href="../../abdo ibra/project it css.css"> <!-- ربط بملف CSS -->
</head>
  

<body class="HR">
<div class="HRO">
      
      <!-- جدول يحتوي على معلومات الفيلم -->
      <table class="film-info">
          <thead>
              <tr>
                  <th>Property</th>
                  <th>value</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>film name</td>
                  <td>peaky blinders</td>
              </tr>
              <tr>
                  <td> year</td>
                  <td>2010</td>
              </tr>
              <tr>
                  <td>director</td>
                  <td>kristofer nolan</td>
              </tr>
              <tr>
                  <td>type</td>
                  <td>Thriller and crime</td>
              </tr>
              <tr>
                  <td> actors </td>
                  <td>kelian murghy,michle,emma watson</td>
              </tr>
    <div class="nav">
        <!-- روابط للتنقل بين الصفحات -->
        <button onclick="showPage('filmPage')">movies</button>
        <button onclick="showPage('sitePage')">website rate</button>
    </div>
           

    <!-- صفحة تقييم الفيلم -->
    <div id="filmPage" class=" container page">
        
        <div class="film-image">
            <img src="5231272.jpg" alt="film poster" width="200">
           <img src="https://tse2.mm.bing.net/th?id=OIP.siAsgcdWVoZSBphSb0LHngHaJ3&pid=Api&P=0&h=220" alt="film poster" width="200">
           <img src="http://www.heyuguys.com/images/2014/10/Tom_005.jpg" alt="film poster" width="200"><!-- صورة للفيلم -->
        </div>
        <form id="filmReviewForm" onsubmit="submitFilmReview(event)">
           
        </form>
        <div id="reviewsTable"></div> <!-- جدول التقييمات -->
        <div class="film-trailer">
            <h2 >the trailer</h2>
          <video width="440" height="360" controls>
              <source src="Peaky Blinders Season 6 Trailer.mp4" type="video/mp4">
              <!-- بدائل إضافية إن لزم الأمر -->
              <source src="video.ogg" type="video/ogg">
              <p>متصفحك لا يدعم عرض الفيديو. يرجى محاولة استخدام متصفح مختلف.</p>
          </video>
        </div>
        <!-- الرسم البياني للتقييمات -->
        <canvas id="ratingsChart"></canvas>
    </div>

    <!-- صفحة تقييم الموقع -->
            <form id="filmReviewForm" onsubmit="submitFilmReview(event)">
    <div id="sitePage" class="page" style="display: none;"> <!-- البداية بإخفاء الصفحة -->
        <h1>website rate </h1>
        <form id="siteReviewForm" onsubmit="submitSiteReview(event)">
            <div class="form-group">
                <label>rate:</label>
                <select id="siteRating" name="siteRating" required>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label>notes:</label>
                <textarea id="siteReview" name="siteReview" rows="4" required></textarea>
            </div>
            <button type="submit">send rate</button>
        </form>
        <div id="siteReviewsTable"></div> <!-- لعرض تقييمات الموقع -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- مكتبة Chart.js -->
    <script>
        function showPage(pageId) {
    // إخفاء جميع الصفحات
    document.querySelectorAll(".page").forEach(page => {
        page.style.display = "none";
    });

    // عرض الصفحة المطلوبة
    document.getElementById(pageId).style.display = "block";
}

let filmReviews = [];
let siteReviews = [];

function submitFilmReview(event) {
    event.preventDefault();

    const movieName = document.getElementById("movieName").value;
    const rating = parseInt(document.getElementById("rating").value, 10);

    filmReviews.push({ movieName, rating });

    updateFilmReviewsTable();
    updateChart();
}

function submitSiteReview(event) {
    event.preventDefault();

    const siteRating = parseInt(document.getElementById("siteRating").value, 10);
    const siteReview = document.getElementById("siteReview").value;

    siteReviews.push({ siteRating, siteReview });

    updateSiteReviewsTable();
}

function updateFilmReviewsTable() {
    const reviewsTable = document.getElementById("reviewsTable");

    let html = `
        <table>
            <tr>
                <th>اسم الفيلم</th>
                <th>التقييم</th>
            </tr>
    `;

    filmReviews.forEach((review) => {
        html += `
            <tr>
                <td>${review.movieName}</td>
                <td>${review.rating}</td>
            </tr>
        `;
    });

    html += "</table>";

    reviewsTable.innerHTML = html;
}

function updateSiteReviewsTable() {
    const siteReviewsTable = document.getElementById("siteReviewsTable");

    let html = `
        <table>
            <tr>
                <th>التقييم</th>
                <th>الملاحظات</th>
            </tr>
    `;

    siteReviews.forEach((review) => {
        html += `
            <tr>
                <td>${review.siteRating}</td>
                <td>${review.siteReview}</td>
            </tr>
        `;
    });

    html += "</table>";

    siteReviewsTable.innerHTML = html;
}

// تحديث الرسم البياني
const ctx = document.getElementById("ratingsChart").getContext("2d");
let chart;

function updateChart() {
    const ratings = [0, 0, 0, 0, 0];

    filmReviews.forEach((review) => {
        ratings[review.rating - 1]++;
    });

    if (chart) {
        chart.destroy(); // إزالة الرسم البياني القديم
    }

    chart = new Chart(ctx, {
        type: "bar",
        data: {
            labels: ["1", "2", "3", "4", "5"],
            datasets: [
                {
                    label: "عدد التقييمات",
                    data: ratings,
                    backgroundColor: "rgba(75, 192, 192, 0.6)",
                    borderColor: "rgba(75, 192, 192, 1)",
                    borderWidth: 1,
                },
            ],
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                },
            },
        },
    });
}
    </script>
</div>
</body>
</html>